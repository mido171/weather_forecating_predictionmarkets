spring:
  application:
    name: ingestion-service
  profiles:
    default: mysql
  jpa:
    hibernate:
      ddl-auto: none
    open-in-view: false
  flyway:
    locations:
      - classpath:db/migration
      - filesystem:../models/src/main/resources/db/migration
    fail-on-missing-locations: false

logging:
  level:
    root: INFO
    org.springframework.boot.context.config: DEBUG
    com.predictionmarkets.weather.gribstream: DEBUG

kalshi:
  base-url: https://api.elections.kalshi.com/trade-api/v2

iem:
  base-url: https://mesonet.agron.iastate.edu

gribstream:
  baseUrl: "https://gribstream.com"
  apiToken: "a379b700999ff2263bc5816c3ca21d25427ce5f7"
  authScheme: "${GRIBSTREAM_AUTH_SCHEME:Bearer}"
  connectTimeoutMillis: 5000
  readTimeoutMillis: 30000
  defaultAccept: "application/ndjson"
  gzip: true
  logHttp: true
  logBodyLimit: 4000
  executor:
    thread-count: 4
  models:
    defaultMinHorizonHours: 0
    gfs:
      maxHorizonHours: 384
    hrrr:
      maxHorizonHours: 48
    nbm:
      maxHorizonHours: 264
    rap:
      maxHorizonHours: 51
    gefsatmosmean:
      maxHorizonHours: 240
    gefsatmos:
      maxHorizonHours: 240
  gefs:
    members: [0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30]
  stations:
    - stationId: KNYC
      zoneId: America/New_York
      latitude: 40.77898
      longitude: -73.96925
      name: New York City
    - stationId: KPHL
      zoneId: America/New_York
      latitude: 39.8729
      longitude: -75.2437
      name: Philadelphia
    - stationId: KMIA
      zoneId: America/New_York
      latitude: 25.7959
      longitude: -80.2870
      name: Miami
    - stationId: KMDW
      zoneId: America/Chicago
      latitude: 41.7868
      longitude: -87.7522
      name: Chicago Midway
    - stationId: KLAX
      zoneId: America/Los_Angeles
      latitude: 33.9425
      longitude: -118.4081
      name: Los Angeles
  transfer:
    export:
      output-path: ingestion-service/src/main/resources/gribstream_daily_feature.csv
      page-size: 5000
      include-header: true
    import:
      input-path: C:\Users\ahmad\Desktop\generalFiles\git\weather-forecasting-predictionmarkets\weather_forecating_predictionmarkets\ingestion-service\src\main\resources\gribstream_daily_feature.csv
      batch-size: 1000
      has-header: true
  training-data:
    output-path: C:\Users\ahmad\Desktop\generalFiles\git\weather-forecasting-predictionmarkets\weather_forecating_predictionmarkets\ingestion-service\src\main\resources\trainingdata_output\gribstream_training_data.csv
    page-size: 5000
    append: true
    mos-asof-policy-id: 2
  variable-ingest:
    enabled: true
    catalog-resource: classpath:gribstream_data
    whitelist-resource: classpath:gribstream_variable_whitelist.csv
    whitelist-required: true
    store-raw: false
    store-summary: true
    collapse-ensemble-members: true
    min-coverage-ratio: 0.5
    batch-size: 20
    max-variables-per-model: 0
    models:
      - hrrr
      - rap
      - nbm
      - gefsatmosmean
      - gefsatmos

app:
  runners:
    gribstream-example:
      enabled: false
      start-date-local: 2021-02-22
      end-date-local: 2025-12-31
      asof-local-time: "12:00"
      asof-time-zone: UTC

pipeline:
  series-tickers:
    - KXHIGHNY
    - KXHIGHPHIL
    - KXHIGHMIA
    - KXHIGHCHI
    - KXHIGHLAX
  station-ids-to-run: "KMDW"
  models:
    - GFS
    - NAM
  date-start-local: 2015-01-01
  date-end-local: 2025-12-31
  mos-window-days: 1
  thread-count: 20
  default-range-days: 30
  asof-policy-name: utc-12
  asof-local-time: "12:00"
  asof-time-zone: UTC
  reset-checkpoints: true

backfill:
  concurrency:
    mos-window-threads: 6
    mos-asof-threads: 6
