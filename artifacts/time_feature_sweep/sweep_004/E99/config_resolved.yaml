data:
  csv_path: C:\Users\ahmad\Desktop\generalFiles\git\weather-forecasting-predictionmarkets\weather_forecating_predictionmarkets\ingestion-service\src\main\resources\trainingdata_output\gribstream_training_data.csv
  dataset_schema_version: 1
validation:
  strict_schema: true
  forecast_min_f: -80.0
  forecast_max_f: 140.0
  spread_min_f: 0.0
  require_asof_not_after_target: true
split:
  train_start: 2021-02-23
  train_end: 2025-01-30
  test_start: 2025-02-01
  test_end: 2025-12-31
  gap_dates:
  - 2025-01-31
  validation:
    enabled: true
    val_start: 2024-07-01
    val_end: 2025-01-30
  cv:
    enabled: true
    n_splits: 5
    gap_days: 2
features:
  base_features:
  - gfs_tmax_f
  - nam_tmax_f
  - gefsatmosmean_tmax_f
  - rap_tmax_f
  - hrrr_tmax_f
  - nbm_tmax_f
  - gefsatmos_tmp_spread_f
  ensemble_stats: true
  pairwise_deltas: true
  model_vs_ens_deltas: true
  calendar: true
  station_onehot: true
  pairwise_pairs: []
  climatology:
    enabled: false
    label_lag_days: 2
    rolling_windows_days:
    - 7
    - 30
models:
  mean:
    candidates:
    - ridge
    - random_forest
    - gbr
    - lgbm
    - xgb
    - catboost
    primary: lgbm
    param_grid:
      ridge:
        alpha:
        - 0.1
        - 1.0
        - 10.0
      random_forest:
        n_estimators:
        - 200
        max_depth:
        - 8
        - 16
        - null
        min_samples_leaf:
        - 1
        - 3
      gbr:
        n_estimators:
        - 200
        max_depth:
        - 3
        - 5
        learning_rate:
        - 0.05
        - 0.1
      lgbm:
        num_leaves:
        - 31
        - 63
        min_data_in_leaf:
        - 20
        - 50
        feature_fraction:
        - 0.8
        bagging_fraction:
        - 0.8
        lambda_l1:
        - 0.0
        - 0.1
        lambda_l2:
        - 0.0
        - 0.1
        learning_rate:
        - 0.05
        - 0.1
        n_estimators:
        - 300
      xgb:
        max_depth:
        - 4
        - 6
        learning_rate:
        - 0.05
        - 0.1
        n_estimators:
        - 300
        subsample:
        - 0.8
        colsample_bytree:
        - 0.8
        min_child_weight:
        - 1
        - 5
        reg_lambda:
        - 1.0
      catboost:
        depth:
        - 6
        - 8
        learning_rate:
        - 0.05
        - 0.1
        iterations:
        - 500
        l2_leaf_reg:
        - 3
        - 10
  sigma:
    method: two_stage
    primary: lgbm
    param_grid:
      lgbm:
        num_leaves:
        - 31
        - 63
        min_data_in_leaf:
        - 20
        - 50
        learning_rate:
        - 0.05
        - 0.1
        n_estimators:
        - 300
    sigma_floor: 0.25
    eps: 1.0e-06
artifacts:
  root_dir: C:\Users\ahmad\Desktop\generalFiles\git\weather-forecasting-predictionmarkets\weather_forecating_predictionmarkets\artifacts
  run_id: null
  overwrite: false
seeds:
  global_seed: 1337
  force_single_thread: true
distribution:
  support_min_f: -30
  support_max_f: 130
calibration:
  enabled: true
  method: isotonic
  bins_to_calibrate:
  - name: lt_52
    type: threshold
    lt: 52
  - name: ge_90
    type: threshold
    ge: 90
postprocess:
  global_normal_calibration:
    enabled: false
    cal_start: null
    cal_end: null
    ddof: 1
    station_scope: null
  baseline_median_calibration:
    enabled: false
    cal_start: null
    cal_end: null
    ddof: 1
    station_scope: null
    forecast_columns: []
experiment:
  experiment_id: E99
  description: Seasonal bias lookup by month
  feature_columns:
  - nbm_tmax_f
  - gfs_tmax_f
  - gefsatmosmean_tmax_f
  - nam_tmax_f
  - hrrr_tmax_f
  - rap_tmax_f
  - gefsatmos_tmp_spread_f
  - month
  - day_of_year
  - sin_doy
  - cos_doy
  - is_weekend
  - bias_nbm_tmax_f_month
  - nbm_tmax_f_seas_corr
  - bias_gfs_tmax_f_month
  - gfs_tmax_f_seas_corr
  - bias_gefsatmosmean_tmax_f_month
  - gefsatmosmean_tmax_f_seas_corr
  - bias_nam_tmax_f_month
  - nam_tmax_f_seas_corr
  - bias_hrrr_tmax_f_month
  - hrrr_tmax_f_seas_corr
  - bias_rap_tmax_f_month
  - rap_tmax_f_seas_corr
  - bias_ensmean_month
  - ensmean_seas_corr
  derived_features:
    formulas:
    - name: bias_nbm_tmax_f_month
      formula: seasonal_bias_by_month
    - name: nbm_tmax_f_seas_corr
      formula: forecast + seasonal_bias
    - name: bias_gfs_tmax_f_month
      formula: seasonal_bias_by_month
    - name: gfs_tmax_f_seas_corr
      formula: forecast + seasonal_bias
    - name: bias_gefsatmosmean_tmax_f_month
      formula: seasonal_bias_by_month
    - name: gefsatmosmean_tmax_f_seas_corr
      formula: forecast + seasonal_bias
    - name: bias_nam_tmax_f_month
      formula: seasonal_bias_by_month
    - name: nam_tmax_f_seas_corr
      formula: forecast + seasonal_bias
    - name: bias_hrrr_tmax_f_month
      formula: seasonal_bias_by_month
    - name: hrrr_tmax_f_seas_corr
      formula: forecast + seasonal_bias
    - name: bias_rap_tmax_f_month
      formula: seasonal_bias_by_month
    - name: rap_tmax_f_seas_corr
      formula: forecast + seasonal_bias
    - name: bias_ensmean_month
      formula: seasonal_bias_by_month
    - name: ensmean_seas_corr
      formula: ens_mean + seasonal_bias
    train_fitted:
    - name: bias_nbm_tmax_f_month
      fit_on: train
      by_station:
        KNYC:
          1: 1.7691700793850136
          2: 2.518820237379745
          3: 2.54716993762594
          4: 2.6443927815754553
          5: 1.1122679876511368
          6: 0.25705908203118866
          7: 0.6584183362734544
          8: 1.1916886655745298
          9: 0.9880117187499312
          10: 0.8030642536121683
          11: 1.7591414388020186
          12: 1.7940301054266816
      default: 1.51676756216803
    - name: bias_gfs_tmax_f_month
      fit_on: train
      by_station:
        KNYC:
          1: 0.7311827956989247
          2: 1.901098901098901
          3: 2.588709677419355
          4: 1.6666666666666667
          5: 1.1370967741935485
          6: 0.35833333333333334
          7: 0.6559139784946236
          8: 1.021505376344086
          9: 0.5222222222222223
          10: -0.5376344086021505
          11: 0.28888888888888886
          12: -0.25806451612903225
      default: 0.8995098039215687
    - name: bias_gefsatmosmean_tmax_f_month
      fit_on: train
      by_station:
        KNYC:
          1: 1.980709195743315
          2: 2.898551981788316
          3: 3.0226840327457927
          4: 3.0164573551956915
          5: 1.2665808184223368
          6: -0.8331334025979817
          7: -2.4674448235413475
          8: -1.6182967952288336
          9: -1.3764182428175902
          10: -0.703184343023817
          11: 1.4136988606770424
          12: 2.0763094226255827
      default: 0.8112122703170966
    - name: bias_nam_tmax_f_month
      fit_on: train
      by_station:
        KNYC:
          1: 1.10752688172043
          2: 2.197802197802198
          3: 2.4838709677419355
          4: 2.658333333333333
          5: 2.056451612903226
          6: 1.2083333333333333
          7: 1.3440860215053763
          8: 1.3870967741935485
          9: 0.18888888888888888
          10: -0.21505376344086022
          11: 1.1444444444444444
          12: 0.8172043010752689
      default: 1.4379084967320261
    - name: bias_hrrr_tmax_f_month
      fit_on: train
      by_station:
        KNYC:
          1: 1.86685826455389
          2: 2.28502960540432
          3: 3.032566424954281
          4: 3.2187180074055575
          5: 1.8317503012379885
          6: -0.7251734924316815
          7: -1.9772940424437575
          8: -1.397282202936029
          9: 0.18598876953120963
          10: 1.0714785602528147
          11: 1.6631111653645418
          12: 2.4194463848810908
      default: 1.1937872154883677
    - name: bias_rap_tmax_f_month
      fit_on: train
      by_station:
        KNYC:
          1: 2.9404265963646257
          2: 3.6958787721067585
          3: 4.052552189980743
          4: 3.985689366658488
          5: 2.35266129032254
          6: 0.4411758422851156
          7: 0.43504195018477126
          8: 0.7712896137852405
          9: 1.6998968505858965
          10: 1.849571369130084
          11: 2.6484673055012604
          12: 2.935719932638147
      default: 2.356069149441148
    - name: bias_ensmean_month
      fit_on: train
      by_station:
        KNYC:
          1: 1.7326456355776996
          2: 2.5828636159300395
          3: 2.9545922050780073
          4: 2.8650429184725312
          5: 1.62613479745513
          6: 0.11776578265888418
          7: -0.22521309658781344
          8: 0.22600023862209
          9: 0.3680983678600917
          10: 0.3780402779880391
          11: 1.4862920172796994
          12: 1.6307742717529563
      default: 1.3692090830113726
    imputation:
      method: train_median
      fill_values:
        nbm_tmax_f: 63.175991210937525
        gfs_tmax_f: 64.5
        gefsatmosmean_tmax_f: 63.38288233996978
        nam_tmax_f: 63.0
        hrrr_tmax_f: 63.429676513671915
        rap_tmax_f: 62.58964813232426
        gefsatmos_tmp_spread_f: 1.985091821481542
        month: 6.0
        day_of_year: 167.0
        sin_doy: 0.15951094710994368
        cos_doy: -0.06553708331203101
        is_weekend: 0.0
        bias_nbm_tmax_f_month: 1.1916886655745298
        nbm_tmax_f_seas_corr: 64.88439278157549
        bias_gfs_tmax_f_month: 0.7311827956989247
        gfs_tmax_f_seas_corr: 65.46236559139786
        bias_gefsatmosmean_tmax_f_month: 1.2665808184223368
        gefsatmosmean_tmax_f_seas_corr: 64.77960502982195
        bias_nam_tmax_f_month: 1.3440860215053763
        nam_tmax_f_seas_corr: 64.65833333333333
        bias_hrrr_tmax_f_month: 1.8317503012379885
        hrrr_tmax_f_seas_corr: 64.94649271647137
        bias_rap_tmax_f_month: 2.35266129032254
        rap_tmax_f_seas_corr: 65.1962021891276
        bias_ensmean_month: 1.62613479745513
        ensmean_seas_corr: 64.9926728058791
